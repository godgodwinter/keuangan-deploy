import{A as l}from"./axios-36c6ef57.js";import{h as u,r as a,i as c,T as r}from"./index-446b9c84.js";const m=u("adminAuthStore",()=>{const o=a(localStorage.getItem("token")?localStorage.getItem("token"):""),e=c(()=>o.value),n=s=>{o.value=s},t=a(localStorage.getItem("isLogin")?localStorage.getItem("isLogin"):!1),i=c(()=>t.value);return{token:o,getToken:e,setToken:n,isLogin:t,getIsLogin:i,setIsLogin:s=>{t.value=s}}}),g=m(),k=async(o,e)=>{try{const t=(await l.post("admin/auth/login",{username:o,password:e})).data.token;return t?(localStorage.setItem("token",t),localStorage.setItem("isLogin",!0),console.log("Login berhasil"),g.setToken(t),g.setIsLogin(!0),r.success("Success","Login Berhasil!")):r.danger("Warning","Login gagal!"),!0}catch(n){console.error(n),r.danger("Warning","Login gagal!")}},d=async o=>{try{const e=await l.post("owner/auth/me",{token:o});if(e.hasOwnProperty("data")){const n=e.data.newToken;return localStorage.setItem("token",n),!0}else return!1}catch(e){return r.danger("Error","Gagal menghubungkan ke Server!"),console.error(e),!1}},I=async(o=!0)=>{try{return localStorage.removeItem("token"),localStorage.removeItem("isLogin"),o&&r.success("Info","Logout berhasil!"),!0}catch(e){console.error(e)}},f={doLogin:k,doCheckToken:d,doLogout:I};export{f as A};
