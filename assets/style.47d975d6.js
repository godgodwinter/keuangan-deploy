import{d as F,g as m,o as p,I as u,r as d,s as N,J as H,b as C,D as A,w as G,K as k,t as j,L as Q,T as tt,h as et,M as Y}from"./index.ecff4158.js";var ot=Object.defineProperty,nt=Object.defineProperties,at=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,it=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable,q=(t,e,o)=>e in t?ot(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,b=(t,e)=>{for(var o in e||(e={}))it.call(e,o)&&q(t,o,e[o]);if(W)for(var o of W(e))st.call(e,o)&&q(t,o,e[o]);return t},Z=(t,e)=>nt(t,at(e));const D={type:"default",timeout:5e3,showCloseButton:!0,position:"top-right",transition:"bounce",hideProgressBar:!1,swipeClose:!0};var I,g;(g=I||(I={}))[g.TITLE_ONLY=0]="TITLE_ONLY",g[g.TITLE_DESCRIPTION=1]="TITLE_DESCRIPTION",g[g.COMPONENT=2]="COMPONENT",g[g.VNODE=3]="VNODE";const rt={"top-left":{bounce:"mosha__bounceInLeft",zoom:"mosha__zoomIn",slide:"mosha__slideInLeft"},"top-right":{bounce:"mosha__bounceInRight",zoom:"mosha__zoomIn",slide:"mosha__slideInRight"},"top-center":{bounce:"mosha__bounceInDown",zoom:"mosha__zoomIn",slide:"mosha__slideInDown"},"bottom-center":{bounce:"mosha__bounceInUp",zoom:"mosha__zoomIn",slide:"mosha__slideInUp"},"bottom-right":{bounce:"mosha__bounceInRight",zoom:"mosha__zoomIn",slide:"mosha__slideInRight"},"bottom-left":{bounce:"mosha__bounceInLeft",zoom:"mosha__zoomIn",slide:"mosha__slideInLeft"}},X=(t,e=300)=>{let o;return(...n)=>{o&&(clearTimeout(o),o=void 0),o=setTimeout(()=>t(...n),e)}},lt=(t,e,o)=>{const n=d(),i=d(void 0),a=d(),l=r=>r instanceof MouseEvent,s=r=>{o!==!1&&n.value&&(l(r)?i.value=n.value.clientX-r.clientX:i.value=n.value.touches[0].clientX-r.touches[0].clientX,a.value=Z(b({},a.value),{transition:"none"}),t.endsWith("left")?a.value.left=-i.value+"px !important":t.endsWith("right")?a.value.right=`${i.value}px !important`:i.value>0?a.value.left=-i.value+"px !important":a.value.right=`${i.value}px !important`,Math.abs(i.value)>200&&e())},v=r=>{o!==!1&&(n.value&&(n.value=void 0),i.value&&(i.value=void 0),removeEventListener(r,s))};return H(()=>{o!==!1&&(v("mousemove"),v("touchmove"))}),{swipedDiff:i,swipeStart:n,swipeStyle:a,swipeHandler:s,startSwipeHandler:r=>{if(o===!1)return;n.value=r;const x=l(r)?"mousemove":"touchmove",_=l(r)?"mouseup":"touchend";addEventListener(x,s),addEventListener(_,()=>(y=>{const z={transition:"left .3s ease-out",left:0},L={transition:"right .3s ease-out",right:0},E={transition:"all .3s ease-out",left:0,right:0};t.endsWith("left")?a.value=b(b({},a.value),z):t.endsWith("right")?a.value=b(b({},a.value),L):a.value=b(b({},a.value),E),n.value=void 0,i.value=void 0,removeEventListener(y,s)})(x))},cleanUpMove:v}};var J=F({props:{type:{type:String,default:"default"}}});const mt={class:"mosha__icon"},ct={key:0,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},pt=m("path",{d:"M4.47 21h15.06c1.54 0 2.5-1.67 1.73-3L13.73 4.99c-.77-1.33-2.69-1.33-3.46 0L2.74 18c-.77 1.33.19 3 1.73 3zM12 14c-.55 0-1-.45-1-1v-2c0-.55.45-1 1-1s1 .45 1 1v2c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z"},null,-1),ut={key:1,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},ft=m("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 11c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z"},null,-1),dt={key:2,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},ht=m("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),bt=m("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.29 16.29L5.7 12.7c-.39-.39-.39-1.02 0-1.41.39-.39 1.02-.39 1.41 0L10 14.17l6.88-6.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-7.59 7.59c-.38.39-1.02.39-1.41 0z"},null,-1),_t={key:3,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#616161"},vt=m("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),yt=m("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},null,-1),wt={key:4,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},gt=m("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),xt=m("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},null,-1);J.render=function(t,e,o,n,i,a){return p(),u("span",mt,[t.type==="warning"?(p(),u("svg",ct,[pt])):t.type==="danger"?(p(),u("svg",ut,[ft])):t.type==="success"?(p(),u("svg",dt,[ht,bt])):t.type==="default"?(p(),u("svg",_t,[vt,yt])):(p(),u("svg",wt,[gt,xt]))])};var M=F({name:"MToast",components:{MIcon:J},props:{visible:Boolean,text:{type:String,default:""},description:{type:String,default:""},toastBackgroundColor:{type:String,default:""},type:{type:String,default:"default"},onClose:{type:Function,default:()=>null},onCloseHandler:{type:Function,required:!0},offset:{type:Number,required:!0},id:{type:Number,required:!0},timeout:{type:Number,default:5e3},position:{type:String,required:!0},showCloseButton:{type:Boolean,default:!0},swipeClose:{type:Boolean,default:!0},hideProgressBar:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},transition:{type:String,default:"bounce"}},setup(t,e){const o=d(),{width:n}=(()=>{const f=d(-1),w=d(-1),c=h=>{h!==null&&h.currentTarget!==null&&(f.value=h.currentTarget.innerWidth,w.value=h.currentTarget.innerHeight)};return N(()=>{window.innerWidth>0&&(f.value=window.innerWidth,w.value=window.innerHeight),window.addEventListener("resize",X(c))}),H(()=>{window.removeEventListener("resize",X(c))}),{width:f,height:w}})(),{swipedDiff:i,startSwipeHandler:a,swipeStyle:l,cleanUpMove:s}=lt(t.position,t.onCloseHandler,t.swipeClose),{transitionType:v}=(r=t.position,x=t.transition,_=i,{transitionType:C(()=>_.value>200?"mosha__fadeOutLeft":_.value<-200?"mosha__fadeOutRight":rt[r][x])});var r,x,_;const{start:y,stop:z,progress:L}=((f,w)=>{const c=d(),h=d(0),T=d(w),B=d(),V=d(100),$=()=>{clearInterval(B.value),clearTimeout(c.value)};return N(()=>{}),H(()=>{$()}),{start:()=>{h.value=Date.now(),clearTimeout(c.value),B.value=setInterval(()=>{V.value--},w/100-5),c.value=setTimeout(f,T.value)},stop:()=>{clearInterval(B.value),clearTimeout(c.value),T.value-=Date.now()-h.value},clear:$,progress:V}})(()=>{t.onCloseHandler()},t.timeout),E=C(()=>e.slots.default),K=C(()=>/<\/?[a-z][\s\S]*>/i.test(t.description)),S=()=>{t.timeout>0&&y()};return A(()=>{const{customStyle:f}=((w,c,h)=>{const T=C(()=>{switch(w){case"top-left":return{left:"0",top:`${c}px`};case"bottom-left":return{left:"0",bottom:`${c}px`};case"bottom-right":return{right:"0",bottom:`${c}px`};case"top-center":return{top:`${c}px`,left:"0",right:"0",marginRight:"auto",marginLeft:"auto"};case"bottom-center":return{bottom:`${c}px`,left:"0",right:"0",marginRight:"auto",marginLeft:"auto"};default:return{right:"0",top:`${c}px`}}});return h.length>0&&(T.value.backgroundColor=h),{customStyle:T}})(t.position,t.offset,t.toastBackgroundColor);o.value=f.value}),N(()=>{S()}),{style:o,transitionType:v,startTimer:S,progress:L,onTouchStart:f=>{a(f)},onMouseLeave:()=>{s("mousemove"),S()},onMouseDown:f=>{a(f)},swipeStyle:l,isSlotPassed:E,isDescriptionHtml:K,onMouseEnter:()=>{t.timeout>0&&n.value>425&&z()}}}});const kt={class:"mosha__toast__content-wrapper"},It={class:"mosha__toast__content"},Ot={class:"mosha__toast__content__text"},zt={key:1,class:"mosha__toast__content__description"},Lt={key:0,class:"mosha__toast__slot-wrapper"};M.render=function(t,e,o,n,i,a){const l=et("MIcon");return p(),u(tt,{name:t.transitionType,type:"animation"},{default:G(()=>[t.visible?(p(),u("div",{key:0,class:["mosha__toast",t.toastBackgroundColor?null:t.type],style:[t.style,t.swipeStyle],onMouseenter:e[2]||(e[2]=(...s)=>t.onMouseEnter&&t.onMouseEnter(...s)),onMouseleave:e[3]||(e[3]=(...s)=>t.onMouseLeave&&t.onMouseLeave(...s)),onTouchstartPassive:e[4]||(e[4]=(...s)=>t.onTouchStart&&t.onTouchStart(...s)),onMousedown:e[5]||(e[5]=(...s)=>t.onMouseDown&&t.onMouseDown(...s))},[m("div",kt,[t.showIcon?(p(),u(l,{key:0,type:t.type},null,8,["type"])):k("",!0),m("div",It,[m("div",Ot,j(t.text),1),t.description.length>0&&t.isDescriptionHtml?(p(),u("div",{key:0,class:"mosha__toast__content__description",innerHTML:t.description},null,8,["innerHTML"])):k("",!0),t.description.length>0&&!t.isDescriptionHtml?(p(),u("div",zt,j(t.description),1)):k("",!0)])]),t.isSlotPassed?(p(),u("div",Lt,[Q(t.$slots,"default")])):k("",!0),t.showCloseButton?(p(),u("div",{key:1,class:"mosha__toast__close-icon",onClick:e[1]||(e[1]=(...s)=>t.onCloseHandler&&t.onCloseHandler(...s))})):k("",!0),t.hideProgressBar?k("",!0):(p(),u("div",{key:2,class:"mosha__toast__progress",style:{width:`${t.progress}%`}},null,4))],38)):k("",!0)]),_:3},8,["name"])};const R={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[],"top-center":[],"bottom-center":[]};let Tt=0;const Et=(t,e)=>{const o=Tt++,n=e?Dt(e):D;if(t.__v_isVNode)return U(o,I.VNODE,n,t),{close:()=>O(o,n.position)};if(t.hasOwnProperty("render"))return U(o,I.COMPONENT,n,t),{close:()=>O(o,n.position)};const i=Ct(t);return U(o,I.TITLE_DESCRIPTION,n,i),{close:()=>O(o,n.position)}},U=(t,e,o,n)=>{setTimeout(()=>{const i=Mt(o,R,12),a=document.createElement("div");let l;document.body.appendChild(a),l=e===I.VNODE?m(M,P(o,t,i,O),()=>[n]):e===I.TITLE_DESCRIPTION?m(M,P(o,t,i,O,n)):m(M,P(o,t,i,O),()=>[m(n)]),Y(l,a),R[o.position].push({toastVNode:l,container:a}),l.component&&(l.component.props.visible=!0)},1)},P=(t,e,o,n,i)=>Z(b(b({},t),i),{id:e,offset:o,visible:!1,onCloseHandler:()=>{n(e,t.position?t.position:"top-right")}}),Dt=t=>{const e=Z(b({},t),{type:t.type||D.type,timeout:t.timeout||D.timeout,showCloseButton:t.showCloseButton,position:t.position||D.position,showIcon:t.showIcon,swipeClose:t.swipeClose,transition:t.transition||D.transition});return e.hideProgressBar=e.timeout!==void 0&&e.timeout<=0,t.hideProgressBar!==void 0&&(e.hideProgressBar=t.hideProgressBar),e},Ct=t=>({text:typeof t=="string"?t:t.title,description:typeof t=="string"?void 0:t.description}),Mt=(t,e,o)=>{let n=o;if(!t.position)throw new Error("no position");return e[t.position].forEach(({toastVNode:i})=>{n+=i.el.offsetHeight+o||0}),n},O=(t,e)=>{const o=R[e],n=o.findIndex(({toastVNode:s})=>s.props&&t===s.props.id);if(n===-1)return;const{container:i,toastVNode:a}=o[n];if(!a.el)return;const l=a.el.offsetHeight;R[e].splice(n,1),((s,v,r,x)=>{for(let _=s;_<v.length;_++){const{toastVNode:y}=v[_];if(!y.el)return;const z=r.split("-")[0]||"top",L=parseInt(y.el.style[z],10)-x-12;if(!y.component)return;y.component.props.offset=L}})(n,o,e,l),a.component&&(a.component.props.visible=!1,a.component.props.onClose&&a.component.props.onClose(),setTimeout(()=>{Y(null,i),document.body.removeChild(i)},1e3))};export{Et as t};
