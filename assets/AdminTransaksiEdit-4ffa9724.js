import{f as U,m as Y,r as d,a as B,o as m,c,e as o,u as n,b as e,n as x,w as D,t as g,p as G,k as z,F as M,T as y,l as P,_ as j}from"./index-ff4ce3c2.js";import{F as O}from"./FungsiCampur-1f52fc3b.js";import{A as h}from"./axios-36c6ef57.js";import{F as _,f as E,a as W}from"./babengValidasi-e9798417.js";import"./adminRekapStore-28e98e49.js";import{m as F,l as J}from"./id-2c2e2348.js";const q=e("div",{class:"pt-4 px-5 md:flex justify-between"},[e("div",null,[e("span",{class:"text-2xl sm:text-3xl leading-none font-bold text-base-content shadow-sm uppercase"}," Edit ")]),e("div",{class:"md:py-0 py-4 space-x-2 space-y-2"})],-1),H={key:0},Q={key:1},X={key:2},Z={class:"w-full py-4 px-2 flex justify-center"},aa={class:"tabs"},ea={key:0,class:"px-4 py-4"},ta={class:"w-full"},sa={class:"shadow rounded-lg px-0"},la={class:"w-full lg:w-fi mx-4"},na={class:"p-2 sm:p-6 xl:p-8"},oa={class:"pt-0 px-0"},ia={class:"w-full mx-0"},da={class:"rounded-lg"},ra={class:"grid md:grid-cols-2 gap-2"},ua=e("label",{for:"name",class:"text-sm font-medium block mb-2"},"Tanggal",-1),ma={class:"text-xs text-red-600 mt-1"},ca=e("div",{class:"flex space-x-2"},[e("label",{for:"kategori",class:"text-sm font-medium block mb-2"},"Kategori ")],-1),pa={class:"text-xs text-red-600 mt-1"},va=e("label",{for:"nominal",class:"text-sm font-medium block mb-2"},"Jumlah / Nominal",-1),ga={class:"text-xs text-red-600 mt-1"},_a=e("label",{for:"desc",class:"text-sm font-medium block mb-2"},"Keterangan",-1),fa={class:"text-xs text-red-600 mt-1"},ba=e("div",{class:"w-full flex justify-end mt-4 px-20"},[e("button",{class:"btn btn-active btn-lg btn-primary"}," Simpan ")],-1),ja={__name:"AdminTransaksiEdit",setup(ka){F.updateLocale("id",J);const K=U(),S=Y(),A=P(()=>j(()=>import("./AlertLoading-ce71e713.js"),["assets/AlertLoading-ce71e713.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/index-ff4ce3c2.js","assets/index-55cc922c.css"])),C=P(()=>j(()=>import("./AlertFailed-d53b03f3.js"),["assets/AlertFailed-d53b03f3.js","assets/index-ff4ce3c2.js","assets/index-55cc922c.css"])),w=d([]),p=d([]),t=d([]),f=d([]),b=d([]),i=d(!0),k=d(!1);t.value.tgl=F().format("YYYY-MM-DD"),t.value.jenis="Pengeluaran";const V=S.params.transaksi_id;(async s=>{try{i.value=!0;const a=await h.get(`admin/transaksi/${s}`);t.value=a.data,t.value.nominal=O.formatRupiah(a.data.nominal),await v(t.value.jenis);const r=await a.data.kategori;t.value.kategori_id.id=await r.id,t.value.kategori_id.label=await r.nama,i.value=!1}catch(a){i.value=!1,k.value=!0,y.danger("Warning","Data Gagal dimuat"),console.error(a)}})(V);const v=async(s="Pengeluaran")=>{try{i.value=!0;const a=await h.get(`admin/data_kategori/jenis?jenis=${s}`);w.value=a.data,I(s),i.value=!1}catch(a){i.value=!1,k.value=!0,y.danger("Warning","Data Gagal dimuat"),console.error(a)}},I=s=>{p.value=w.value,f.value=[],p.value.forEach(a=>{f.value.push({label:a.nama,id:a.id})}),t.value.kategori_id={label:p.value[0].nama,id:p.value[0].id}};v("Pengeluaran");const R=async s=>{t.value.jenis="Pengeluaran",t.value.kategori_id=null,await v("Pengeluaran")},N=async s=>{t.value.jenis="Pemasukan",t.value.kategori_id=null,await v("Pemasukan")},T=s=>{t.value.kategori_id==null?b.value.kategori_id="Kategori harus diisi":(b.value.kategori_id="",s.nominal=s.nominal.replace(/\D/g,""),s.kategori_id=t.value.kategori_id.id,s.kategori_nama=t.value.kategori_id.label,$(s))},$=async s=>{console.log(s);let a={tgl:s.tgl,nama:s.nama,nominal:s.nominal,kategori_id:s.kategori_id,jenis:s.jenis};await h.put(`admin/transaksi/${V}`,a)&&(y.success("Info","Data berhasil diupdate!"),K.push({name:"admin-transaksi"}))},L=()=>{const s=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}),a=t.value.nominal.replace(/\D/g,"");t.value.nominal=s.format(a)};return(s,a)=>{const r=B("v-select");return m(),c(M,null,[q,i.value?(m(),c("span",H,[o(n(A))])):k.value?(m(),c("span",Q,[o(n(C),{message:"Gagal mendapatkan response dari server"})])):(m(),c("span",X,[e("div",Z,[e("div",aa,[e("a",{class:x(["tab tab-bordered",{"tab-active":t.value.jenis=="Pengeluaran"}]),onClick:a[0]||(a[0]=u=>R())},"Pengeluaran",2),e("a",{class:x(["tab tab-bordered",{"tab-active":t.value.jenis=="Pemasukan"}]),onClick:a[1]||(a[1]=u=>N())},"Pemasukan",2)])]),t.value?(m(),c("div",ea,[e("div",ta,[e("div",sa,[e("div",la,[e("div",na,[o(n(W),{onSubmit:T},{default:D(({errors:u})=>[e("div",oa,[e("div",ia,[e("div",da,[e("div",ra,[e("div",null,[ua,o(n(_),{modelValue:t.value.jenis,"onUpdate:modelValue":a[2]||(a[2]=l=>t.value.jenis=l),name:"jenis",type:"hidden",class:"input input-bordered w-11/12"},null,8,["modelValue"]),o(n(_),{rules:n(E).validateData2,modelValue:t.value.tgl,"onUpdate:modelValue":a[3]||(a[3]=l=>t.value.tgl=l),name:"tgl",type:"date",class:"input input-bordered w-11/12"},null,8,["rules","modelValue"]),e("div",ma,g(u.tgl),1)]),e("div",null,[ca,o(r,{class:x(["input py-2 px-3 w-11/12 style-chooser",{disabled:!1}]),options:f.value,modelValue:t.value.kategori_id,"onUpdate:modelValue":a[4]||(a[4]=l=>t.value.kategori_id=l)},null,8,["options","modelValue"]),e("div",pa,g(b.value.kategori_id),1)]),e("div",null,[va,o(n(_),{rules:n(E).validateData2,modelValue:t.value.nominal,"onUpdate:modelValue":a[5]||(a[5]=l=>t.value.nominal=l),name:"nominal",type:"text",class:"input input-bordered w-11/12",onKeyup:a[6]||(a[6]=l=>L())},null,8,["rules","modelValue"]),e("div",ga,g(u.nominal),1)]),e("div",null,[_a,o(n(_),{modelValue:t.value.nama,"onUpdate:modelValue":a[7]||(a[7]=l=>t.value.nama=l),name:"nama",type:"text",class:"input input-bordered w-11/12"},{default:D(({field:l})=>[e("textarea",G(l,{class:"textarea textarea-bordered w-11/12 h-24",placeholder:"Keterangan"}),null,16)]),_:1},8,["modelValue"]),e("div",fa,g(u.nama),1)])]),ba])])])]),_:1})])])])])])):z("",!0)]))],64)}}};export{ja as default};
