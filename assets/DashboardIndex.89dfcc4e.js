import{d as j,r as d,b as c,o as x,c as D,e as a,n as v,g as A,w as z,t as p,f as P,N as U,O as L,F,P as Z,h as q,a as I}from"./index.b7c6ced0.js";import{m as i,l as K,u as O,A as N,F as G}from"./apiTransaksi.0616d158.js";import{u as H}from"./admin.0816b3b5.js";import"./style.59d7246c.js";import{C as J,r as Q,D as W}from"./index.12155fca.js";const X=a("div",{class:"pt-4 px-5 md:flex justify-between"},[a("div",null,[a("span",{class:"text-2xl sm:text-3xl leading-none font-bold text-base-content shadow-sm"}," Dashboard ")])],-1),aa={class:"py-4 px-4"},ea={class:"tabs"},ta={class:"pt-4 px-5 md:flex justify-between"},sa=a("div",null,null,-1),na={class:"pt-4 px-5 flex justify-center"},la={class:"py-4 px-4"},oa={class:"bg-gray-100 p-1 rounded-lg"},ra={class:"py-4 px-4"},ua={class:"flex justify-between w-full border-b-2 py-4 px-2 bg-base-200"},ia={class:"flex space-x-2 py-4"},da=a("span",null,[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})])],-1),ca={class:"font-bold"},va=I('<option disabled>Urutkan?</option><option value="namaasc">Nama (A-Z)</option><option value="namadesc">Nama (Z-A)</option><option selected value="terbanyak">Terbanyak</option><option value="tersedikit">Tersedikit</option>',5),pa=[va],ma={class:"py-2"},fa={class:"flex justify-between w-full py-4"},ha=["value"],Da=j({__name:"DashboardIndex",setup(ba){i.updateLocale("id",K),J.register(...Q),i().format("DD MMMM YYYY");const Y=H(),l=d([]),u=O();Y.setPagesActive("dashboard");const $=c(()=>u.getData);c(()=>u.getDataShowDaily),c(()=>u.getDataShowDailyPerTahun);const m=c(()=>u.getDataChart),f=c(()=>u.getDataBlnThn);c(()=>u.getDataRekap),u.$subscribe((t,e)=>{w(),console.log(m.value)}),$.value.length<1&&N.getData();const o=d([]);o.value.monthyear={month:f.value.blnNumber-1,year:f.value.thn},o.value.monthyear=f.value.thn;const T=()=>{let t=f.value.bln,e=o.value.monthyear,n={month:t-1,year:e},s={nama:i(n).format("MMMM YYYY"),bln:i(n).format("MM"),blnNumber:i(n).format("Mo"),blnNama:i(n).format("MMMM"),thn:i(n).format("YYYY")};u.setDataBlnThn(s),N.getData()},r=d({labels:["Paris","N\xEEmes","Toulon","Perpignan","Autre"],datasets:[{data:[30,40,60,70,5],backgroundColor:["#77CEFF","#0079AF","#123E6B","#97B0C4","#A5C8ED"]}]}),h=d(!1),b=d(!0),g=d(!1),k=t=>{t=="ringkasan"?(h.value=!0,b.value=!1,g.value=!1):t=="pengeluaran"?(h.value=!1,b.value=!0,g.value=!1):(h.value=!1,b.value=!1,g.value=!0)},B=()=>{k("ringkasan"),C()},E=()=>{k("pengeluaran"),w()},S=()=>{k("pemasukan"),R()},_=()=>{r.value.labels=[],r.value.datasets[0].data=[]},y=t=>{t=="namaasc"?(console.log("sort by nama asc"),l.value.sort((e,n)=>e.nama<n.nama?-1:e.nama>n.nama?1:0)):t=="namadesc"?(console.log("sort by nama desc"),l.value.sort((e,n)=>e.nama<n.nama?1:e.nama>n.nama?-1:0)):t=="tersedikit"?l.value.sort((e,n)=>e.nominal-n.nominal):l.value.sort((e,n)=>n.nominal-e.nominal)};o.value.sort="terbanyak";const V=()=>{console.log(o.value.sort),y(o.value.sort)},C=()=>{l.value=m.value.ringkasan,y(o.value.sort),_(),l.value.forEach(t=>{r.value.labels.push(`${t.nama} : ${t.persentase} %`),r.value.datasets[0].data.push(t.nominal),r.value.datasets[0].backgroundColor.push(t.color)})},w=()=>{l.value=m.value.pengeluaran,console.log(l.value),y(o.value.sort),_(),l.value.forEach(t=>{r.value.labels.push(`${t.nama} : ${t.persentase} %`),r.value.datasets[0].data.push(t.nominal),r.value.datasets[0].backgroundColor.push(t.color)})},R=()=>{l.value=m.value.pemasukan,y(o.value.sort),_(),l.value.forEach(t=>{r.value.labels.push(`${t.nama} : ${t.persentase} %`),r.value.datasets[0].data.push(t.nominal),r.value.datasets[0].backgroundColor.push(t.color)})};return C(),(t,e)=>{const n=q("Datepicker");return x(),D(F,null,[X,a("div",aa,[a("div",ea,[a("a",{class:v(["tab tab-bordered",{"tab-active":h.value}]),onClick:e[0]||(e[0]=s=>B())},"Ringkasan",2),a("a",{class:v(["tab tab-bordered",{"tab-active":b.value}]),onClick:e[1]||(e[1]=s=>E())},"Pengeluaran",2),a("a",{class:v(["tab tab-bordered",{"tab-active":g.value}]),onClick:e[2]||(e[2]=s=>S())},"Pemasukan",2)])]),a("div",ta,[sa,a("div",na,[A(n,{format:"yyyy","value-format":"yyyy",modelValue:o.value.monthyear,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.monthyear=s),yearPicker:"",required:""},{"calendar-header":z(({index:s,day:M})=>[a("div",{class:v(s===5||s===6?"red-color":"")},p(M),3)]),_:1},8,["modelValue"]),a("button",{class:"btn btn-sm btn-primary",onClick:e[4]||(e[4]=s=>T())}," Pilih ")])]),a("div",la,[a("div",oa,[A(P(W),{chartData:r.value},null,8,["chartData"])])]),a("div",ra,[a("div",ua,[a("div",ia,[da,a("h4",ca,p(l.value.length)+" Kategori",1)]),a("div",null,[U(a("select",{class:"select select-bordered w-full max-w-xs",onChange:e[5]||(e[5]=s=>V()),"onUpdate:modelValue":e[6]||(e[6]=s=>o.value.sort=s)},pa,544),[[L,o.value.sort]])])]),(x(!0),D(F,null,Z(l.value,(s,M)=>(x(),D("div",{class:"bg-base-100",key:s.id},[a("div",ma,[a("div",fa,[a("div",null," ("+p(isNaN(s.persentase)?0:s.persentase)+"%) "+p(s.nama),1),a("div",null,p(P(G).rupiah(s.nominal)),1)]),a("div",null,[a("progress",{class:v(["progress w-full","bg-[#c5c5c5]"]),value:s.persentase,max:"100"},null,8,ha)])])]))),128))])],64)}}});export{Da as default};
