import{m as g,l as U,A as z}from"./apiTransaksi.c8d50373.js";import{u as I,A as N}from"./apiKategori.0d3f9bc5.js";import{u as B}from"./admin.2beef323.js";import{T as R}from"./Toast.154d9e42.js";import{F as d,f as y,a as $}from"./babengValidasi.c29cfcbe.js";import{d as E,b as H,r as u,j as L,U as J,o as D,c as V,e,n as f,g as o,w as b,f as n,t as m,W,K as q,F as G,h as K}from"./index.15382d5f.js";import"./style.aaa29a51.js";const O={class:"w-full py-4 px-2 flex justify-center"},Q={class:"tabs"},X={key:0,class:"px-4 py-4"},Z={class:"w-full"},ee={class:"shadow rounded-lg px-0"},ae={class:"w-full lg:w-fi mx-4"},te={class:"p-2 sm:p-6 xl:p-8"},se={class:"pt-0 px-0"},le={class:"w-full mx-0"},oe={class:"rounded-lg"},ne={class:"grid md:grid-cols-2 gap-2"},ie=e("label",{for:"name",class:"text-sm font-medium block mb-2"},"Tanggal",-1),re={class:"text-xs text-red-600 mt-1"},de={class:"flex space-x-2"},ue=e("label",{for:"kategori",class:"text-sm font-medium block mb-2"},"Kategori ",-1),me=e("span",{class:"hover:link"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 fill-current",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),e("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"})])],-1),ce={class:"text-xs text-red-600 mt-1"},ve=e("label",{for:"nominal",class:"text-sm font-medium block mb-2"},"Jumlah / Nominal",-1),pe={class:"text-xs text-red-600 mt-1"},_e=e("label",{for:"desc",class:"text-sm font-medium block mb-2"},"Keterangan",-1),ge={class:"text-xs text-red-600 mt-1"},fe=e("div",{class:"w-full flex justify-end mt-4 px-20"},[e("button",{class:"btn btn-active btn-lg btn-primary"}," Simpan ")],-1),Pe=E({__name:"TransaksiTambah",setup(be){const h=I(),x=H(()=>h.getData),i=u([]);h.$subscribe((s,t)=>{c("Pengeluaran")}),i.value=x.value,N.getData();const c=s=>{i.value=x.value.filter(t=>t.jenis===s),p.value=[],i.value.forEach(t=>{p.value.push({label:t.nama,id:t.id})}),a.value.kategori_id={label:i.value[0].nama,id:i.value[0].id}};g.updateLocale("id",U);const P=L();J(),B().setPagesActive("transaksi");const a=u([]),j=new Intl.DateTimeFormat("id",{month:"long"});let v=new Date;v.getDate();let k=v.getMonth(),w=v.getFullYear();j.format(new Date(w,k)),g().format("DD MMMM YYYY"),a.value.tgl=g().format("YYYY-MM-DD"),a.value.jenis="Pengeluaran",new Date(w,k,0).getDate();const p=u([]),A=async s=>{a.value.jenis="Pengeluaran",a.value.kategori_id=null,c("Pengeluaran")},F=async s=>{a.value.jenis="Pemasukan",a.value.kategori_id=null,c("Pemasukan")},_=u([]),S=s=>{a.value.kategori_id==null?_.value.kategori_id="Kategori harus diisi":(_.value.kategori_id="",s.nominal=s.nominal.replace(/\D/g,""),s.kategori_id=a.value.kategori_id.id,s.kategori_nama=a.value.kategori_id.label,T(s))},T=async s=>{await z.doStoreData(s)&&(R.success("Info","Data berhasil ditambahkan!"),P.push({name:"AdminTransaksi"}))},M=()=>{const s=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}),t=a.value.nominal.replace(/\D/g,"");a.value.nominal=s.format(t)};return(s,t)=>{const Y=K("router-link"),C=K("v-select");return D(),V(G,null,[e("div",O,[e("div",Q,[e("a",{class:f(["tab tab-bordered",{"tab-active":a.value.jenis=="Pengeluaran"}]),onClick:t[0]||(t[0]=r=>A())},"Pengeluaran",2),e("a",{class:f(["tab tab-bordered",{"tab-active":a.value.jenis=="Pemasukan"}]),onClick:t[1]||(t[1]=r=>F())},"Pemasukan",2)])]),a.value?(D(),V("div",X,[e("div",Z,[e("div",ee,[e("div",ae,[e("div",te,[o(n($),{onSubmit:S},{default:b(({errors:r})=>[e("div",se,[e("div",le,[e("div",oe,[e("div",ne,[e("div",null,[ie,o(n(d),{modelValue:a.value.jenis,"onUpdate:modelValue":t[2]||(t[2]=l=>a.value.jenis=l),name:"jenis",type:"hidden",class:"input input-bordered w-11/12"},null,8,["modelValue"]),o(n(d),{rules:n(y).validateData2,modelValue:a.value.tgl,"onUpdate:modelValue":t[3]||(t[3]=l=>a.value.tgl=l),name:"tgl",type:"date",class:"input input-bordered w-11/12"},null,8,["rules","modelValue"]),e("div",re,m(r.tgl),1)]),e("div",null,[e("div",de,[ue,o(Y,{to:{name:"AdminKategori"}},{default:b(()=>[me]),_:1})]),o(C,{class:f(["input py-2 px-3 w-11/12 style-chooser",{disabled:!1}]),options:p.value,modelValue:a.value.kategori_id,"onUpdate:modelValue":t[4]||(t[4]=l=>a.value.kategori_id=l)},null,8,["options","modelValue"]),e("div",ce,m(_.value.kategori_id),1)]),e("div",null,[ve,o(n(d),{rules:n(y).validateData2,modelValue:a.value.nominal,"onUpdate:modelValue":t[5]||(t[5]=l=>a.value.nominal=l),name:"nominal",type:"text",class:"input input-bordered w-11/12",onKeyup:t[6]||(t[6]=l=>M())},null,8,["rules","modelValue"]),e("div",pe,m(r.nominal),1)]),e("div",null,[_e,o(n(d),{modelValue:a.value.nama,"onUpdate:modelValue":t[7]||(t[7]=l=>a.value.nama=l),name:"nama",type:"text",class:"input input-bordered w-11/12"},{default:b(({field:l})=>[e("textarea",W(l,{class:"textarea textarea-bordered w-11/12 h-24",placeholder:"Keterangan"}),null,16)]),_:1},8,["modelValue"]),e("div",ge,m(r.nama),1)])]),fe])])])]),_:1})])])])])])):q("",!0)],64)}}});export{Pe as default};
