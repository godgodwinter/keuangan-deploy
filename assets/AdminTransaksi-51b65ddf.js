import{f as $,i as I,r as m,a as D,o as l,c as r,b as a,t as e,u as o,e as h,w as y,n as R,F as M,L,k as G,T as b,g as K,l as N,_ as C}from"./index-8e503d76.js";import{F as _}from"./FungsiCampur-1f52fc3b.js";import{A as V}from"./axios-0b41204e.js";import{m as t,l as O}from"./id-dfe64da7.js";import{u as U}from"./adminRekapStore-baf9783f.js";const q={class:"pt-4 px-5 md:flex justify-between"},W={class:"text-2xl sm:text-3xl leading-none font-bold text-base-content shadow-sm uppercase"},J=a("div",{class:"md:py-0 py-4 space-x-2 space-y-2"},null,-1),Q={class:"p-4"},X={class:"tabs tabs-boxed"},Z=a("a",{class:"tab tab-active"},"Harian",-1),aa=a("a",{class:"tab"},"Bulanan",-1),ta=a("a",{class:"tab"},"Tahunan",-1),ea={class:"pt-4 px-5 md:flex justify-between"},sa=a("div",null,null,-1),oa={class:"pt-4 px-5 flex justify-center"},na={key:0},la={key:1},ra={key:2},ia={key:0,class:"font-mono"},da={class:"w-full py-6 px-2 flex justify-center shadow"},ca={class:"grid grid-cols-3 w-full text-center"},ua=a("div",{class:"font-bold"},"Pemasukan",-1),ma={class:"text-sky-600"},_a={class:""},va=a("div",{class:"font-bold"},"Pengeluaran",-1),ha={class:"text-red-600"},pa={class:""},fa=a("div",{class:"font-bold"},"Saldo",-1),ya={key:0,class:"text-primary-content text-red-500"},xa={key:1,class:"text-primary-content text-sky-500"},ka={class:"w-full py-4 flex-col justify-center px-4 space-y-4"},ga={class:"grid grid-cols-3 w-full"},Ma={class:"grid-cols-1 font-bold border-r-2"},ba={class:"flex flex-row space-x-2"},wa={class:"text-2xl"},Ya={class:"text-right text-sky-600 border-r-2 px-2"},Aa={class:"text-right text-red-600"},Da={class:"grid grid-cols-3 w-full border-b-2 border-slate-200"},Ra={class:"grid-cols-1 border-r-2 flex space-x-2"},La=["onClick"],Na=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 fill-current",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),Ca=[Na],Va={class:"text-md font-semibold font-mono text-teal-600"},Pa={class:"border-r-2 px-2"},ja={class:"font-mono"},Ea=["onClick"],Ta=a("button",{class:"btn btn-circle btn-sm w-8 h-8"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})])],-1),Ba=a("div",{class:"divider divide-red-600"},null,-1),Ga={__name:"AdminTransaksi",setup(Sa){t.updateLocale("id",O);const P=$(),j=N(()=>C(()=>import("./AlertLoading-df737a83.js"),["assets/AlertLoading-df737a83.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/index-8e503d76.js","assets/index-d9df2e80.css"])),E=N(()=>C(()=>import("./AlertFailed-4b4e7eb9.js"),["assets/AlertFailed-4b4e7eb9.js","assets/index-8e503d76.js","assets/index-d9df2e80.css"])),x=U(),v=I(()=>x.getdateNow);v.value===null&&x.setdateNow(t().format("YYYY-MM-DD"));const n=m({monthyear:{month:0,year:0}});n.value.monthyear={month:parseInt(t(v.value).format("MM"))-1,year:parseInt(t(v.value).format("YYYY"))};const k=m([]),i=m([]),w=m([]),p=m(!0),Y=m(!1);m([]);const T=async()=>{n.value.monthyear.month,n.value.monthyear.year,t(n.value.monthyear).format("MMMM YYYY"),t(n.value.monthyear).format("MM"),t(n.value.monthyear).format("Mo"),t(n.value.monthyear).format("MMMM"),t(n.value.monthyear).format("YYYY"),x.setdateNow(t(n.value.monthyear).format("YYYY-MM-DD")),await g()},g=async()=>{try{p.value=!0;let d={month:parseInt(t(v.value).format("MM")),year:parseInt(t(v.value).format("YYYY"))};const c=await V.get(`admin/data_transaksi/detail?month=${d.month}&year=${d.year}`);w.value=c.data,i.value=c.rekap,k.value=w.value,p.value=!1}catch(d){p.value=!1,Y.value=!0,b.danger("Warning","Data Gagal dimuat"),console.error(d)}};g();const B=async(d,c)=>{confirm("Apakah anda yakin menghapus data ini?")&&(await V.delete(`admin/transaksi/${d}`)?(b.success("Info","Data berhasil dihapus!"),g()):b.danger("Info","Data gagal dihapus!"))},S=async(d,c)=>{P.push({name:"admin-transaksi-edit",params:{transaksi_id:d}})};return(d,c)=>{const f=D("RouterLink"),z=D("Datepicker");return l(),r(M,null,[a("div",q,[a("div",null,[a("span",W," REKAP TRANSAKSI HARIAN BULAN "+e(o(t)(v.value).format("MMMM YYYY")),1)]),J]),a("div",Q,[a("div",X,[h(f,{to:{name:"admin-transaksi-harian"}},{default:y(()=>[Z]),_:1}),h(f,{to:{name:"admin-transaksi-bulanan"}},{default:y(()=>[aa]),_:1}),h(f,{to:{name:"admin-transaksi-tahunan"}},{default:y(()=>[ta]),_:1})])]),a("div",ea,[sa,a("div",oa,[h(z,{format:"MMMM yyyy","value-format":"yyyy-MM",modelValue:n.value.monthyear,"onUpdate:modelValue":c[0]||(c[0]=s=>n.value.monthyear=s),monthPicker:"",required:""},{"calendar-header":y(({index:s,day:A})=>[a("div",{class:R(s===5||s===6?"red-color":"")},e(A),3)]),_:1},8,["modelValue"]),a("button",{class:"btn btn-sm btn-primary",onClick:c[1]||(c[1]=s=>T())}," Pilih ")])]),p.value?(l(),r("span",na,[h(o(j))])):Y.value?(l(),r("span",la,[h(o(E),{message:"Gagal mendapatkan response dari server"})])):(l(),r("span",ra,[k.value?(l(),r("div",ia,[a("div",da,[a("div",ca,[a("div",null,[ua,a("div",ma,e(o(_).formatRupiah(i.value.pemasukan?i.value.pemasukan:0)),1)]),a("div",_a,[va,a("div",ha,e(o(_).formatRupiah(i.value.pengeluaran?i.value.pengeluaran:0)),1)]),a("div",pa,[fa,i.value.saldo<0?(l(),r("div",ya,e(o(_).formatRupiahMinus(i.value.saldo?i.value.saldo:0)),1)):(l(),r("div",xa,e(o(_).formatRupiah(i.value.saldo?i.value.saldo:0)),1))])])]),(l(!0),r(M,null,L(k.value,(s,A)=>(l(),r("div",ka,[a("div",ga,[a("div",Ma,[a("div",ba,[a("span",wa,e(o(t)(s.nama).format("DD")),1),a("div",null,[a("div",null,[a("span",null,e(o(t)(s.nama).format("MMMM YYYY")),1)]),a("div",null,e(o(t)(s.nama).format("dddd")),1)])])]),a("div",Ya,e(o(_).formatRupiah(s.pemasukan?s.pemasukan:0)),1),a("div",Aa,e(o(_).formatRupiah(s.pengeluaran?s.pengeluaran:0)),1)]),(l(!0),r(M,null,L(s.detail,(u,F)=>(l(),r("div",Da,[a("div",Ra,[a("button",{class:"btn btn-circle btn-error btn-sm",onClick:H=>B(u.id)},Ca,8,La),a("span",Va,e(F+1)+". "+e(u.kategori_nama),1)]),a("div",Pa,[a("span",ja,e(u.nama),1)]),a("div",{class:R(["text-right hover:underline font-mono",{"text-red-600":u.jenis=="Pengeluaran","text-sky-600":u.jenis=="Pemasukan"}]),onClick:H=>S(u.id)},[Ta,K(" "+e(o(_).formatRupiah(u.nominal?u.nominal:0)),1)],10,Ea)]))),256)),Ba]))),256))])):G("",!0)]))],64)}}};export{Ga as default};
