import{A as a}from"./axios-526409ed.js";import{T as r}from"./index-cee19467.js";import{u as c}from"./adminAuthStore-608b6f41.js";const s=c(),g=async(o,e)=>{try{const n=(await a.post("admin/auth/login",{username:o,password:e})).data.token;return n?(localStorage.setItem("token",n),localStorage.setItem("isLogin",!0),console.log("Login berhasil"),s.setToken(n),s.setIsLogin(!0),r.success("Success","Login Berhasil!")):r.danger("Warning","Login gagal!"),!0}catch(t){console.error(t),r.danger("Warning","Login gagal!")}},i=async o=>{try{const e=await a.post("owner/auth/me",{token:o});if(e.hasOwnProperty("data")){const t=e.data.newToken;return localStorage.setItem("token",t),!0}else return!1}catch(e){return r.danger("Error","Gagal menghubungkan ke Server!"),console.error(e),!1}},l=async(o=!0)=>{try{return localStorage.removeItem("token"),localStorage.removeItem("isLogin"),o&&r.success("Info","Logout berhasil!"),!0}catch(e){console.error(e)}},h={doLogin:g,doCheckToken:i,doLogout:l};export{h as A};
