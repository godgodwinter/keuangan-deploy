import{f as S,m as H,i as G,r as u,o as l,c as r,b as a,t as o,u as i,k as M,e as Y,F as g,L as D,T as x,n as I,g as O,l as A,_ as C}from"./index-feb11979.js";import{F as k}from"./FungsiCampur-1f52fc3b.js";import{A as R}from"./axios-526409ed.js";import{m as n,l as W}from"./id-22f85544.js";import{C as q,r as J}from"./index-adcd91cb.js";import{u as Q}from"./adminRekapStore-b9850310.js";const U={key:0,class:"pt-4 px-5 md:flex justify-between"},X={class:"text-2xl sm:text-3xl leading-none font-bold text-base-content shadow-sm uppercase"},Z={class:"md:py-0 py-4 space-x-2 space-y-2"},aa={key:1},ea={key:2},ta={key:3},sa={key:0},oa={class:"py-4 px-4"},na={class:"flex justify-between w-full border-b-2 py-4 px-2 bg-base-200"},la={class:"flex space-x-2 py-4"},ra=a("span",null,[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})])],-1),ia={class:"font-bold"},da={class:"font-bold"},ca=a("h4",{class:"font-bold"},":",-1),ua={class:"font-bold text-emerald-600"},ma=a("div",null,null,-1),_a={class:"w-full py-4 flex-col justify-center px-4 space-y-4"},va={class:"grid grid-cols-3 w-full"},pa={class:"grid-cols-1 font-bold border-r-2"},ha={class:"flex flex-row space-x-2"},fa={class:"text-2xl"},ga=a("div",{class:"text-right text-sky-600 border-r-2 px-2"},null,-1),xa={class:"text-right text-slate-600"},ka={class:"grid grid-cols-3 w-full border-b-2 border-slate-200"},ba={class:"grid-cols-1 border-r-2 flex space-x-2"},ya=["onClick"],wa=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 fill-current",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),Ma=[wa],Ya={class:"text-md font-semibold font-mono text-teal-600"},Da={class:"border-r-2 px-2"},Aa={class:"font-mono"},Ca=["onClick"],Ra=a("button",{class:"btn btn-circle btn-sm w-8 h-8"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})])],-1),Ea=a("div",{class:"divider divide-red-600"},null,-1),Ta={__name:"AdminRekapBulananDetailKategori",setup(Fa){n.updateLocale("id",W);const E=S(),F=H().params.kategori_id,L=A(()=>C(()=>import("./AlertLoading-c4187b17.js"),["assets/AlertLoading-c4187b17.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/index-feb11979.js","assets/index-d9df2e80.css"])),V=A(()=>C(()=>import("./AlertFailed-2dde2346.js"),["assets/AlertFailed-2dde2346.js","assets/index-feb11979.js","assets/index-d9df2e80.css"])),b=Q(),m=G(()=>b.getdateNow);m.value===null&&b.setdateNow(n().format("YYYY-MM-DD")),q.register(...J),n().format("DD MMMM YYYY");const v=u({labels:["Paris","NÃ®mes","Toulon","Perpignan","Autre"],datasets:[{data:[30,40,60,70,5],backgroundColor:["#77CEFF","#0079AF","#123E6B","#97B0C4","#A5C8ED"]}]}),h=u({monthyear:{month:0,year:0}});h.value.monthyear={month:parseInt(n(m.value).format("MM"))-1,year:parseInt(n(m.value).format("YYYY"))};const d=u([]),_=u([]),f=u([]),p=u(!0),y=u(!1);u([]);const w=async()=>{try{p.value=!0;let t={month:parseInt(n(m.value).format("MM")),year:parseInt(n(m.value).format("YYYY"))};const s=await R.get(`admin/datatransaksi/ringkasan/kategori/${F}?month=${t.month}&year=${t.year}`);f.value=s.data,_.value=s.rekap,d.value=f.value;const e=await P();console.log(f.value),p.value=!1}catch(t){p.value=!1,y.value=!0,x.danger("Warning","Data Gagal dimuat"),console.error(t)}};w();const B=()=>{v.value.labels=[],v.value.datasets[0].data=[]},N=t=>{t=="namaasc"?(console.log("sort by nama asc"),d.value.sort((s,e)=>s.nama<e.nama?-1:s.nama>e.nama?1:0)):t=="namadesc"?(console.log("sort by nama desc"),d.value.sort((s,e)=>s.nama<e.nama?1:s.nama>e.nama?-1:0)):t=="tersedikit"?d.value.sort((s,e)=>s.nominal-e.nominal):d.value.sort((s,e)=>e.nominal-s.nominal)};h.value.sort="terbanyak";const P=()=>{N(h.value.sort),B(),d.value.forEach(t=>{v.value.labels.push(`${t.nama} : ${t.persentase} %`),v.value.datasets[0].data.push(t.nominal),v.value.datasets[0].backgroundColor.push(t.color)})},$=()=>{window.history.go(-1)},j=async(t,s)=>{E.push({name:"admin-transaksi-edit",params:{transaksi_id:t}})},z=async(t,s)=>{confirm("Apakah anda yakin menghapus data ini?")&&(await R.delete(`admin/transaksi/${t}`)?(x.success("Info","Data berhasil dihapus!"),w()):x.danger("Info","Data gagal dihapus!"))};return(t,s)=>(l(),r(g,null,[_.value?(l(),r("div",U,[a("div",null,[a("span",X,' REKAP KATEGORI "'+o(_.value.kategori_nama)+'" '+o(i(n)(m.value).format("MMMM YYYY")),1)]),a("div",Z,[a("button",{class:"btn btn-secondary",onClick:s[0]||(s[0]=e=>$())},"Kembali")])])):M("",!0),p.value?(l(),r("span",aa,[Y(i(L))])):y.value?(l(),r("span",ea,[Y(i(V),{message:"Gagal mendapatkan response dari server"})])):(l(),r("span",ta,[d.value?(l(),r("div",sa,[a("div",oa,[a("div",na,[a("div",la,[ra,a("h4",ia,o(_.value.jml_tgl)+" Data ",1),a("h4",da,o(_.value.jml_transaksi)+" Transaksi",1),ca,a("h4",ua,o(i(k).formatRupiah(_.value.total_nominal)),1)]),ma]),(l(!0),r(g,null,D(d.value,(e,Va)=>(l(),r("div",_a,[a("div",va,[a("div",pa,[a("div",ha,[a("span",fa,o(i(n)(e.nama).format("DD")),1),a("div",null,[a("div",null,[a("span",null,o(i(n)(e.nama).format("MMMM YYYY")),1)]),a("div",null,o(i(n)(e.nama).format("dddd")),1)])])]),ga,a("div",xa,o(i(k).formatRupiah(e.total_nominal?e.total_nominal:0)),1)]),(l(!0),r(g,null,D(e.detail,(c,T)=>(l(),r("div",ka,[a("div",ba,[a("button",{class:"btn btn-circle btn-error btn-sm",onClick:K=>z(c.id)},Ma,8,ya),a("span",Ya,o(T+1)+". "+o(c.kategori_nama),1)]),a("div",Da,[a("span",Aa,o(c.nama),1)]),a("div",{class:I(["text-right hover:underline font-mono",{"text-red-600":c.jenis=="Pengeluaran","text-sky-600":c.jenis=="Pemasukan"}]),onClick:K=>j(c.id)},[Ra,O(" "+o(i(k).formatRupiah(c.nominal?c.nominal:0)),1)],10,Ca)]))),256)),Ea]))),256))])])):M("",!0)]))],64))}};export{Ta as default};
