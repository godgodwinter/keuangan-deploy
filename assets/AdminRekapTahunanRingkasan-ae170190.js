import{i as S,r,a as A,o as i,c as d,b as a,t as u,u as p,e as c,w as _,n as C,M as T,N as $,F as D,L as B,k as j,T as z,O as I,l as N,_ as P}from"./index-446b9c84.js";import{F as U}from"./FungsiCampur-1f52fc3b.js";import{A as G}from"./axios-36c6ef57.js";import{m as h,l as K}from"./id-16290fc0.js";import{C as O,r as Z,D as q}from"./index-816952b1.js";import{u as H}from"./adminRekapStore-8b20e7e9.js";const W={class:"pt-4 px-5 md:flex justify-between"},J={class:"text-2xl sm:text-3xl leading-none font-bold text-base-content shadow-sm uppercase"},Q=a("div",{class:"md:py-0 py-4 space-x-2 space-y-2"},null,-1),X={class:"p-4"},aa={class:"tabs tabs-boxed"},ea=a("a",{class:"tab tab-active"},"Ringkasan",-1),ta=a("a",{class:"tab"},"Pengeluaran",-1),sa=a("a",{class:"tab"},"Pemasukan",-1),na={class:"pt-4 px-5 md:flex justify-between"},oa=a("div",null,null,-1),la={class:"pt-4 px-5 flex justify-center"},ra={key:0},ia={key:1},da={key:2},ua={key:0},ca={class:"py-4 px-4"},ma={class:"bg-gray-100 p-1 rounded-lg"},pa={class:"py-4 px-4"},va={class:"flex justify-between w-full border-b-2 py-4 px-2 bg-base-200"},_a={class:"flex space-x-2 py-4"},ha=a("span",null,[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})])],-1),fa={class:"font-bold"},ya=I('<option disabled>Urutkan?</option><option value="namaasc">Nama (A-Z)</option><option value="namadesc">Nama (Z-A)</option><option selected value="terbanyak">Terbanyak</option><option value="tersedikit">Tersedikit</option>',5),ga=[ya],ba={class:"py-2"},ka={class:"flex justify-between w-full py-4"},xa=["value"],Ya={__name:"AdminRekapTahunanRingkasan",setup(wa){h.updateLocale("id",K);const R=N(()=>P(()=>import("./AlertLoading-98b6c50f.js"),["assets/AlertLoading-98b6c50f.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/index-446b9c84.js","assets/index-d9df2e80.css"])),Y=N(()=>P(()=>import("./AlertFailed-3b2a348b.js"),["assets/AlertFailed-3b2a348b.js","assets/index-446b9c84.js","assets/index-d9df2e80.css"])),f=H(),y=S(()=>f.getdateNowPertahun);y.value===null&&f.setdateNowPertahun(`${h().format("YYYY")}`),O.register(...Z),h().format("DD MMMM YYYY");const m=r({labels:["Paris","NÃ®mes","Toulon","Perpignan","Autre"],datasets:[{data:[30,40,60,70,5],backgroundColor:["#77CEFF","#0079AF","#123E6B","#97B0C4","#A5C8ED"]}]}),o=r({monthyear:0});o.value.monthyear=y.value;const l=r([]),b=r([]),v=r(!0),k=r(!1);r([]);const E=async()=>{o.value.monthyear.year,f.setdateNowPertahun(`${o.value.monthyear}`),await x()},x=async()=>{try{v.value=!0;let n=`${o.value.monthyear}`;const e=await G.get(`admin/datatransaksi_pertahun/ringkasan?year=${n}`);b.value=e.data,l.value=b.value;const t=await L();v.value=!1}catch(n){v.value=!1,k.value=!0,z.danger("Warning","Data Gagal dimuat"),console.error(n)}};x();const F=()=>{m.value.labels=[],m.value.datasets[0].data=[]},w=n=>{n=="namaasc"?(console.log("sort by nama asc"),l.value.sort((e,t)=>e.nama<t.nama?-1:e.nama>t.nama?1:0)):n=="namadesc"?(console.log("sort by nama desc"),l.value.sort((e,t)=>e.nama<t.nama?1:e.nama>t.nama?-1:0)):n=="tersedikit"?l.value.sort((e,t)=>e.nominal-t.nominal):l.value.sort((e,t)=>t.nominal-e.nominal)};o.value.sort="terbanyak";const V=()=>{w(o.value.sort)},L=()=>{w(o.value.sort),F(),l.value.forEach(n=>{m.value.labels.push(`${n.nama} : ${n.persentase} %`),m.value.datasets[0].data.push(n.nominal),m.value.datasets[0].backgroundColor.push(n.color)})};return(n,e)=>{const t=A("RouterLink"),M=A("Datepicker");return i(),d(D,null,[a("div",W,[a("div",null,[a("span",J," REKAP RINGKASAN TAHUN "+u(p(h)(y.value).format("YYYY")),1)]),Q]),a("div",X,[a("div",aa,[c(t,{to:{name:"admin-rekap-tahunan-ringkasan"}},{default:_(()=>[ea]),_:1}),c(t,{to:{name:"admin-rekap-tahunan-pengeluaran"}},{default:_(()=>[ta]),_:1}),c(t,{to:{name:"admin-rekap-tahunan-pemasukan"}},{default:_(()=>[sa]),_:1})])]),a("div",na,[oa,a("div",la,[c(M,{format:"yyyy","value-format":"yyyy",modelValue:o.value.monthyear,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.monthyear=s),yearPicker:"",required:""},{"calendar-header":_(({index:s,day:g})=>[a("div",{class:C(s===5||s===6?"red-color":"")},u(g),3)]),_:1},8,["modelValue"]),a("button",{class:"btn btn-sm btn-primary",onClick:e[1]||(e[1]=s=>E())}," Pilih ")])]),v.value?(i(),d("span",ra,[c(p(R))])):k.value?(i(),d("span",ia,[c(p(Y),{message:"Gagal mendapatkan response dari server"})])):(i(),d("span",da,[l.value?(i(),d("div",ua,[a("div",ca,[a("div",ma,[c(p(q),{chartData:m.value},null,8,["chartData"])])]),a("div",pa,[a("div",va,[a("div",_a,[ha,a("h4",fa,u(l.value.length)+" Kategori",1)]),a("div",null,[T(a("select",{class:"select select-bordered w-full max-w-xs",onChange:e[2]||(e[2]=s=>V()),"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.sort=s)},ga,544),[[$,o.value.sort]])])]),(i(!0),d(D,null,B(l.value,(s,g)=>(i(),d("div",{class:"bg-base-100",key:s.id},[a("div",ba,[a("div",ka,[a("div",null,[a("span",null,u(g+1)+". "+u(s.nama)+" : "+u(s.persentase)+"%",1)]),a("div",null,u(p(U).formatRupiah(s.nominal)),1)]),a("div",null,[a("progress",{class:C(["progress w-full","bg-[#c5c5c5]"]),value:s.persentase,max:"100"},null,8,xa)])])]))),128))])])):j("",!0)]))],64)}}};export{Ya as default};
