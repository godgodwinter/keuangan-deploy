import{i as S,r as i,a as x,o as u,c as d,b as a,t as c,u as _,e as m,w as f,n as w,M as B,N as I,F as A,L as T,k as $,T as j,O as z,l as D,_ as N}from"./index-446b9c84.js";import{F as U}from"./FungsiCampur-1f52fc3b.js";import{A as G}from"./axios-36c6ef57.js";import{m as l,l as K}from"./id-16290fc0.js";import{C as O,r as Z,D as q}from"./index-816952b1.js";import{u as W}from"./adminRekapStore-8b20e7e9.js";const H={class:"pt-4 px-5 md:flex justify-between"},J={class:"text-2xl sm:text-3xl leading-none font-bold text-base-content shadow-sm uppercase"},Q=a("div",{class:"md:py-0 py-4 space-x-2 space-y-2"},null,-1),X={class:"p-4"},aa={class:"tabs tabs-boxed"},ea=a("a",{class:"tab tab-active"},"Ringkasan",-1),ta=a("a",{class:"tab"},"Pengeluaran",-1),sa=a("a",{class:"tab"},"Pemasukan",-1),na={class:"pt-4 px-5 md:flex justify-between"},oa=a("div",null,null,-1),la={class:"pt-4 px-5 flex justify-center"},ra={key:0},ia={key:1},ua={key:2},da={key:0},ca={class:"py-4 px-4"},ma={class:"bg-gray-100 p-1 rounded-lg"},pa={class:"py-4 px-4"},va={class:"flex justify-between w-full border-b-2 py-4 px-2 bg-base-200"},_a={class:"flex space-x-2 py-4"},ha=a("span",null,[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})])],-1),fa={class:"font-bold"},ya=z('<option disabled>Urutkan?</option><option value="namaasc">Nama (A-Z)</option><option value="namadesc">Nama (Z-A)</option><option selected value="terbanyak">Terbanyak</option><option value="tersedikit">Tersedikit</option>',5),ba=[ya],ga={class:"py-2"},ka={class:"flex justify-between w-full py-4"},Ma=["value"],Ra={__name:"AdminRekapBulananRingkasan",setup(Ya){l.updateLocale("id",K);const C=D(()=>N(()=>import("./AlertLoading-98b6c50f.js"),["assets/AlertLoading-98b6c50f.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/index-446b9c84.js","assets/index-d9df2e80.css"])),R=D(()=>N(()=>import("./AlertFailed-3b2a348b.js"),["assets/AlertFailed-3b2a348b.js","assets/index-446b9c84.js","assets/index-d9df2e80.css"])),y=W(),p=S(()=>y.getdateNow);p.value===null&&y.setdateNow(l().format("YYYY-MM-DD")),O.register(...Z),l().format("DD MMMM YYYY");const v=i({labels:["Paris","NÃ®mes","Toulon","Perpignan","Autre"],datasets:[{data:[30,40,60,70,5],backgroundColor:["#77CEFF","#0079AF","#123E6B","#97B0C4","#A5C8ED"]}]}),t=i({monthyear:{month:0,year:0}});t.value.monthyear={month:parseInt(l(p.value).format("MM"))-1,year:parseInt(l(p.value).format("YYYY"))};const r=i([]),g=i([]),h=i(!0),k=i(!1);i([]);const E=async()=>{t.value.monthyear.month,t.value.monthyear.year,l(t.value.monthyear).format("MMMM YYYY"),l(t.value.monthyear).format("MM"),l(t.value.monthyear).format("Mo"),l(t.value.monthyear).format("MMMM"),l(t.value.monthyear).format("YYYY"),y.setdateNow(l(t.value.monthyear).format("YYYY-MM-DD")),await M()},M=async()=>{try{h.value=!0;let s={month:parseInt(l(p.value).format("MM")),year:parseInt(l(p.value).format("YYYY"))};const e=await G.get(`admin/datatransaksi/ringkasan?month=${s.month}&year=${s.year}`);g.value=e.data,r.value=g.value;const n=await V();h.value=!1}catch(s){h.value=!1,k.value=!0,j.danger("Warning","Data Gagal dimuat"),console.error(s)}};M();const F=()=>{v.value.labels=[],v.value.datasets[0].data=[]},Y=s=>{s=="namaasc"?(console.log("sort by nama asc"),r.value.sort((e,n)=>e.nama<n.nama?-1:e.nama>n.nama?1:0)):s=="namadesc"?(console.log("sort by nama desc"),r.value.sort((e,n)=>e.nama<n.nama?1:e.nama>n.nama?-1:0)):s=="tersedikit"?r.value.sort((e,n)=>e.nominal-n.nominal):r.value.sort((e,n)=>n.nominal-e.nominal)};t.value.sort="terbanyak";const P=()=>{Y(t.value.sort)},V=()=>{Y(t.value.sort),F(),r.value.forEach(s=>{v.value.labels.push(`${s.nama} : ${s.persentase} %`),v.value.datasets[0].data.push(s.nominal),v.value.datasets[0].backgroundColor.push(s.color)})};return(s,e)=>{const n=x("RouterLink"),L=x("Datepicker");return u(),d(A,null,[a("div",H,[a("div",null,[a("span",J," REKAP BULANAN RINGKASAN "+c(_(l)(p.value).format("MMMM YYYY")),1)]),Q]),a("div",X,[a("div",aa,[m(n,{to:{name:"admin-rekap-bulanan-ringkasan"}},{default:f(()=>[ea]),_:1}),m(n,{to:{name:"admin-rekap-bulanan-pengeluaran"}},{default:f(()=>[ta]),_:1}),m(n,{to:{name:"admin-rekap-bulanan-pemasukan"}},{default:f(()=>[sa]),_:1})])]),a("div",na,[oa,a("div",la,[m(L,{format:"MMMM yyyy","value-format":"yyyy-MM",modelValue:t.value.monthyear,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.monthyear=o),monthPicker:"",required:""},{"calendar-header":f(({index:o,day:b})=>[a("div",{class:w(o===5||o===6?"red-color":"")},c(b),3)]),_:1},8,["modelValue"]),a("button",{class:"btn btn-sm btn-primary",onClick:e[1]||(e[1]=o=>E())}," Pilih ")])]),h.value?(u(),d("span",ra,[m(_(C))])):k.value?(u(),d("span",ia,[m(_(R),{message:"Gagal mendapatkan response dari server"})])):(u(),d("span",ua,[r.value?(u(),d("div",da,[a("div",ca,[a("div",ma,[m(_(q),{chartData:v.value},null,8,["chartData"])])]),a("div",pa,[a("div",va,[a("div",_a,[ha,a("h4",fa,c(r.value.length)+" Kategori",1)]),a("div",null,[B(a("select",{class:"select select-bordered w-full max-w-xs",onChange:e[2]||(e[2]=o=>P()),"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.sort=o)},ba,544),[[I,t.value.sort]])])]),(u(!0),d(A,null,T(r.value,(o,b)=>(u(),d("div",{class:"bg-base-100",key:o.id},[a("div",ga,[a("div",ka,[a("div",null,[a("span",null,c(b+1)+". "+c(o.nama)+" : "+c(o.persentase)+"%",1)]),a("div",null,c(_(U).formatRupiah(o.nominal)),1)]),a("div",null,[a("progress",{class:w(["progress w-full","bg-[#c5c5c5]"]),value:o.persentase,max:"100"},null,8,Ma)])])]))),128))])])):$("",!0)]))],64)}}};export{Ra as default};
