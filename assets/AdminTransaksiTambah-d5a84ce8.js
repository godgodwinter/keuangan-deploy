import{f as R,r as i,a as U,o as r,c as u,e as o,u as n,b as e,n as f,w as h,t as p,p as B,k as Y,F as $,T as w,l as V,_ as P}from"./index-ff4ce3c2.js";import{A as j}from"./axios-36c6ef57.js";import{F as v,f as D,a as M}from"./babengValidasi-e9798417.js";import"./adminRekapStore-28e98e49.js";import{m as A,l as z}from"./id-2c2e2348.js";const G=e("div",{class:"pt-4 px-5 md:flex justify-between"},[e("div",null,[e("span",{class:"text-2xl sm:text-3xl leading-none font-bold text-base-content shadow-sm uppercase"}," TAMBAH ")]),e("div",{class:"md:py-0 py-4 space-x-2 space-y-2"})],-1),O={key:0},H={key:1},J={key:2},W={class:"w-full py-4 px-2 flex justify-center"},q={class:"tabs"},Q={key:0,class:"px-4 py-4"},X={class:"w-full"},Z={class:"shadow rounded-lg px-0"},ee={class:"w-full lg:w-fi mx-4"},ae={class:"p-2 sm:p-6 xl:p-8"},te={class:"pt-0 px-0"},se={class:"w-full mx-0"},le={class:"rounded-lg"},ne={class:"grid md:grid-cols-2 gap-2"},oe=e("label",{for:"name",class:"text-sm font-medium block mb-2"},"Tanggal",-1),ie={class:"text-xs text-red-600 mt-1"},de=e("div",{class:"flex space-x-2"},[e("label",{for:"kategori",class:"text-sm font-medium block mb-2"},"Kategori ")],-1),re={class:"text-xs text-red-600 mt-1"},ue=e("label",{for:"nominal",class:"text-sm font-medium block mb-2"},"Jumlah / Nominal",-1),me={class:"text-xs text-red-600 mt-1"},ce=e("label",{for:"desc",class:"text-sm font-medium block mb-2"},"Keterangan",-1),pe={class:"text-xs text-red-600 mt-1"},ve=e("div",{class:"w-full flex justify-end mt-4 px-20"},[e("button",{class:"btn btn-active btn-lg btn-primary"}," Simpan ")],-1),ye={__name:"AdminTransaksiTambah",setup(_e){A.updateLocale("id",z);const F=R(),K=V(()=>P(()=>import("./AlertLoading-ce71e713.js"),["assets/AlertLoading-ce71e713.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/index-ff4ce3c2.js","assets/index-55cc922c.css"])),S=V(()=>P(()=>import("./AlertFailed-d53b03f3.js"),["assets/AlertFailed-d53b03f3.js","assets/index-ff4ce3c2.js","assets/index-55cc922c.css"])),x=i([]),m=i([]),t=i([]),_=i([]),g=i([]),c=i(!0),k=i(!1);t.value.tgl=A().format("YYYY-MM-DD"),t.value.jenis="Pengeluaran";const b=async(s="Pengeluaran")=>{try{c.value=!0;const a=await j.get(`admin/data_kategori/jenis?jenis=${s}`);x.value=a.data,E(s),c.value=!1}catch(a){c.value=!1,k.value=!0,w.danger("Warning","Data Gagal dimuat"),console.error(a)}},E=s=>{m.value=x.value,_.value=[],m.value.forEach(a=>{_.value.push({label:a.nama,id:a.id})}),t.value.kategori_id={label:m.value[0].nama,id:m.value[0].id}};b("Pengeluaran");const T=async s=>{t.value.jenis="Pengeluaran",t.value.kategori_id=null,await b("Pengeluaran")},C=async s=>{t.value.jenis="Pemasukan",t.value.kategori_id=null,await b("Pemasukan")},I=s=>{t.value.kategori_id==null?g.value.kategori_id="Kategori harus diisi":(g.value.kategori_id="",s.nominal=s.nominal.replace(/\D/g,""),s.kategori_id=t.value.kategori_id.id,s.kategori_nama=t.value.kategori_id.label,N(s))},N=async s=>{console.log(s);let a={tgl:s.tgl,nama:s.nama,nominal:s.nominal,kategori_id:s.kategori_id,jenis:s.jenis};await j.post("admin/transaksi",a)&&(w.success("Info","Data berhasil ditambahkan!"),F.push({name:"admin-transaksi"}))},L=()=>{const s=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}),a=t.value.nominal.replace(/\D/g,"");t.value.nominal=s.format(a)};return(s,a)=>{const y=U("v-select");return r(),u($,null,[G,c.value?(r(),u("span",O,[o(n(K))])):k.value?(r(),u("span",H,[o(n(S),{message:"Gagal mendapatkan response dari server"})])):(r(),u("span",J,[e("div",W,[e("div",q,[e("a",{class:f(["tab tab-bordered",{"tab-active":t.value.jenis=="Pengeluaran"}]),onClick:a[0]||(a[0]=d=>T())},"Pengeluaran",2),e("a",{class:f(["tab tab-bordered",{"tab-active":t.value.jenis=="Pemasukan"}]),onClick:a[1]||(a[1]=d=>C())},"Pemasukan",2)])]),t.value?(r(),u("div",Q,[e("div",X,[e("div",Z,[e("div",ee,[e("div",ae,[o(n(M),{onSubmit:I},{default:h(({errors:d})=>[e("div",te,[e("div",se,[e("div",le,[e("div",ne,[e("div",null,[oe,o(n(v),{modelValue:t.value.jenis,"onUpdate:modelValue":a[2]||(a[2]=l=>t.value.jenis=l),name:"jenis",type:"hidden",class:"input input-bordered w-11/12"},null,8,["modelValue"]),o(n(v),{rules:n(D).validateData2,modelValue:t.value.tgl,"onUpdate:modelValue":a[3]||(a[3]=l=>t.value.tgl=l),name:"tgl",type:"date",class:"input input-bordered w-11/12"},null,8,["rules","modelValue"]),e("div",ie,p(d.tgl),1)]),e("div",null,[de,o(y,{class:f(["input py-2 px-3 w-11/12 style-chooser",{disabled:!1}]),options:_.value,modelValue:t.value.kategori_id,"onUpdate:modelValue":a[4]||(a[4]=l=>t.value.kategori_id=l)},null,8,["options","modelValue"]),e("div",re,p(g.value.kategori_id),1)]),e("div",null,[ue,o(n(v),{rules:n(D).validateData2,modelValue:t.value.nominal,"onUpdate:modelValue":a[5]||(a[5]=l=>t.value.nominal=l),name:"nominal",type:"text",class:"input input-bordered w-11/12",onKeyup:a[6]||(a[6]=l=>L())},null,8,["rules","modelValue"]),e("div",me,p(d.nominal),1)]),e("div",null,[ce,o(n(v),{modelValue:t.value.nama,"onUpdate:modelValue":a[7]||(a[7]=l=>t.value.nama=l),name:"nama",type:"text",class:"input input-bordered w-11/12"},{default:h(({field:l})=>[e("textarea",B(l,{class:"textarea textarea-bordered w-11/12 h-24",placeholder:"Keterangan"}),null,16)]),_:1},8,["modelValue"]),e("div",pe,p(d.nama),1)])]),ve])])])]),_:1})])])])])])):Y("",!0)]))],64)}}};export{ye as default};
