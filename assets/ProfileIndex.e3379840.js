import{A as D,T as v}from"./Toast.d8d4c2d8.js";import{H as U,c as b,d as I,j as N,N as E,r as x,o as g,a as y,b as e,f as i,w as j,e as n,t as u,K as B,F as C}from"./index.1a86910d.js";import{u as K}from"./adminAuth.69764203.js";import{u as M}from"./admin.959ac1b5.js";import{F as p,f as _,a as R}from"./babengValidasi.8b3f3243.js";import"./style.9725afdb.js";const k=U({id:"storeDataProfile",state:()=>({data:null}),getters:{getData:s=>s.data},actions:{setData(s){this.data=s}}}),P=K();b(()=>P.me);const A=k();b(()=>A.getData);const T=async()=>{try{let d=(await D.post("admin/auth/profile")).data.me;return A.setData(d),d}catch(s){console.error(s)}},H=async s=>{let d={nama:s.nama,username:s.username,email:s.email,password:s.password};try{const m=await D.put("admin/auth/profile",d),f={nama:s.nama,username:s.username,email:s.email};return P.setMe(f),!0}catch(m){console.error(m)}},V={getData:T,doUpdate:H},W=e("div",{class:"pt-4 px-5 md:flex justify-between"},[e("div",null,[e("span",{class:"text-2xl sm:text-3xl leading-none font-bold text-base-content shadow-sm"}," Profile ")]),e("div",{class:"md:py-0 py-4 space-x-2 space-y-2"})],-1),q={key:0,class:"px-4 py-4"},z={class:"w-full"},G={class:"shadow rounded-lg px-0"},J={class:"w-full lg:w-fi mx-4"},L={class:"p-2 sm:p-6 xl:p-8"},O={class:"pt-0 px-0"},Q={class:"w-full mx-0"},X={class:"rounded-lg"},Y={class:"grid md:grid-cols-2 gap-2"},Z=e("label",{for:"nama",class:"text-sm font-medium block mb-2"},"Full Name",-1),$={class:"text-xs text-red-600 mt-1"},ee=e("label",{for:"username",class:"text-sm font-medium block mb-2"},"Username",-1),se={class:"text-xs text-red-600 mt-1"},ae=e("label",{for:"email",class:"text-sm font-medium block mb-2"},"Email",-1),te={class:"text-xs text-red-600 mt-1"},oe=e("label",{for:"password",class:"text-sm font-medium block mb-2"},"Password",-1),le={class:"text-xs text-red-600 mt-1"},ne=e("label",{for:"password2",class:"text-sm font-medium block mb-2"},"Konfirmasi Password",-1),de={class:"text-xs text-red-600 mt-1"},re=e("div",{class:"w-full flex justify-end mt-4 px-20"},[e("button",{class:"btn btn-active btn-lg btn-primary"}," Simpan ")],-1),ve=I({__name:"ProfileIndex",setup(s){const d=k(),m=b(()=>d.getData),f=N();E(),M().setPagesActive("profile");const a=x([]),c=x(null),S=async()=>{c.value=await V.getData(),c.value?(console.log(c.value),a.value=c.value):(v.warning("Info","Data tidak ditemukan"),f.push({name:"AdminSkills"}))};m.value?a.value=m.value:S();const r=x([]),F=async t=>{t.password!=null&&t.password!=""||t.password2!=null&&t.password2!=""?t.password2==t.password?t.password.length<3?r.value.password="Password minimal 3 karakter":(r.value.password=null,h(t)):(r.value.password="Password tidak sama",v.warning("Warning","Konfirmasi password tidak sama! Periksa kembali")):(r.value.password=null,t.password=null,t.password2=null,h(t))},h=async t=>{await V.doUpdate(t)&&(a.value.password=null,a.value.password2=null,v.success("Info","Data berhasil diupdate!"))};return(t,o)=>(g(),y(C,null,[W,a.value?(g(),y("div",q,[e("div",z,[e("div",G,[e("div",J,[e("div",L,[i(n(R),{onSubmit:F},{default:j(({errors:w})=>[e("div",O,[e("div",Q,[e("div",X,[e("div",Y,[e("div",null,[Z,i(n(p),{rules:n(_).validateData2,modelValue:a.value.nama,"onUpdate:modelValue":o[0]||(o[0]=l=>a.value.nama=l),name:"nama",type:"text",class:"input input-bordered w-11/12"},null,8,["rules","modelValue"]),e("div",$,u(w.nama),1)]),e("div",null,[ee,i(n(p),{rules:n(_).validateData2,modelValue:a.value.username,"onUpdate:modelValue":o[1]||(o[1]=l=>a.value.username=l),name:"username",type:"text",class:"input input-bordered w-11/12"},null,8,["rules","modelValue"]),e("div",se,u(w.username),1)]),e("div",null,[ae,i(n(p),{rules:n(_).validateEmail,modelValue:a.value.email,"onUpdate:modelValue":o[2]||(o[2]=l=>a.value.email=l),name:"email",type:"text",class:"input input-bordered w-11/12"},null,8,["rules","modelValue"]),e("div",te,u(w.email),1)]),e("div",null,[oe,i(n(p),{modelValue:a.value.password,"onUpdate:modelValue":o[3]||(o[3]=l=>a.value.password=l),name:"password",type:"password",class:"input input-bordered w-11/12"},null,8,["modelValue"]),e("div",le,u(r.value.password),1)]),e("div",null,[ne,i(n(p),{modelValue:a.value.password2,"onUpdate:modelValue":o[4]||(o[4]=l=>a.value.password2=l),name:"password2",type:"password",class:"input input-bordered w-11/12"},null,8,["modelValue"]),e("div",de,u(r.value.password),1)])]),re])])])]),_:1})])])])])])):B("",!0)],64))}});export{ve as default};
