import{d as z,r as v,b as y,o as M,c as C,e as a,n as c,g as D,w as N,t as m,f as k,N as K,O as L,F,P as Z,U as q,h as B,a as I}from"./index.b7c6ced0.js";import{m as i,l as O,u as G,A as Y,F as H}from"./apiTransaksi.0616d158.js";import{u as J}from"./admin.0816b3b5.js";import"./style.59d7246c.js";import{C as Q,r as W,D as X}from"./index.12155fca.js";const aa=a("div",{class:"pt-4 px-5 md:flex justify-between"},[a("div",null,[a("span",{class:"text-2xl sm:text-3xl leading-none font-bold text-base-content shadow-sm"}," REKAP BULANAN ")])],-1),ea={class:"py-4 px-4"},ta={class:"tabs"},sa={class:"pt-4 px-5 md:flex justify-between"},na=a("div",null,null,-1),la={class:"pt-4 px-5 flex justify-center"},oa={class:"py-4 px-4"},ra={class:"bg-gray-100 p-1 rounded-lg"},ua={class:"py-4 px-4"},ia={class:"flex justify-between w-full border-b-2 py-4 px-2 bg-base-200"},da={class:"flex space-x-2 py-4"},va=a("span",null,[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})])],-1),ca={class:"font-bold"},ma=I('<option disabled>Urutkan?</option><option value="namaasc">Nama (A-Z)</option><option value="namadesc">Nama (Z-A)</option><option selected value="terbanyak">Terbanyak</option><option value="tersedikit">Tersedikit</option>',5),pa=[ma],ha={class:"py-2"},fa={class:"flex justify-between w-full py-4"},ba=["value"],Ca=z({__name:"RekapBulananIndex",setup(ga){i.updateLocale("id",O),Q.register(...W),i().format("DD MMMM YYYY");const $=J(),l=v([]),d=G();$.setPagesActive("rekap"),y(()=>d.getData),y(()=>d.getDataShowDailyPerTahun);const p=y(()=>d.getDataChartPerBulan),u=y(()=>d.getDataBlnThn);d.$subscribe((e,t)=>{A(),console.log(p.value)}),u.value&&Y.getDataRekapMonthly(u.value.bln,u.value.thn);const s=v([]);s.value.monthyear={month:u.value.blnNumber-1,year:u.value.thn};const T=()=>{s.value.monthyear.month,s.value.monthyear.year;let e={nama:i(s.value.monthyear).format("MMMM YYYY"),bln:i(s.value.monthyear).format("MM"),blnNumber:i(s.value.monthyear).format("Mo"),blnNama:i(s.value.monthyear).format("MMMM"),thn:i(s.value.monthyear).format("YYYY")};d.setDataBlnThn(e),Y.getDataRekapMonthly(e.bln,e.thn),console.log(s.value.monthyear)},o=v({labels:["Paris","N\xEEmes","Toulon","Perpignan","Autre"],datasets:[{data:[30,40,60,70,5],backgroundColor:["#77CEFF","#0079AF","#123E6B","#97B0C4","#A5C8ED"]}]}),h=v(!1),f=v(!0),b=v(!1),_=e=>{e=="ringkasan"?(h.value=!0,f.value=!1,b.value=!1):e=="pengeluaran"?(h.value=!1,f.value=!0,b.value=!1):(h.value=!1,f.value=!1,b.value=!0)},E=()=>{_("ringkasan"),w()},R=()=>{_("pengeluaran"),A()},V=()=>{_("pemasukan"),j()},x=()=>{o.value.labels=[],o.value.datasets[0].data=[]},g=e=>{e=="namaasc"?(console.log("sort by nama asc"),l.value.sort((t,r)=>t.nama<r.nama?-1:t.nama>r.nama?1:0)):e=="namadesc"?(console.log("sort by nama desc"),l.value.sort((t,r)=>t.nama<r.nama?1:t.nama>r.nama?-1:0)):e=="tersedikit"?l.value.sort((t,r)=>t.nominal-r.nominal):l.value.sort((t,r)=>r.nominal-t.nominal)};s.value.sort="terbanyak";const S=()=>{console.log(s.value.sort),g(s.value.sort)},w=()=>{l.value=p.value.ringkasan,g(s.value.sort),x(),l.value.forEach(e=>{o.value.labels.push(`${e.nama} : ${e.persentase} %`),o.value.datasets[0].data.push(e.nominal),o.value.datasets[0].backgroundColor.push(e.color)})},A=()=>{l.value=p.value.pengeluaran,console.log(l.value),g(s.value.sort),x(),l.value.forEach(e=>{o.value.labels.push(`${e.nama} : ${e.persentase} %`),o.value.datasets[0].data.push(e.nominal),o.value.datasets[0].backgroundColor.push(e.color)})},j=()=>{l.value=p.value.pemasukan,g(s.value.sort),x(),l.value.forEach(e=>{o.value.labels.push(`${e.nama} : ${e.persentase} %`),o.value.datasets[0].data.push(e.nominal),o.value.datasets[0].backgroundColor.push(e.color)})};return w(),(e,t)=>{const r=B("Datepicker"),U=B("router-link");return M(),C(F,null,[aa,a("div",ea,[a("div",ta,[a("a",{class:c(["tab tab-bordered",{"tab-active":h.value}]),onClick:t[0]||(t[0]=n=>E())},"Ringkasan",2),a("a",{class:c(["tab tab-bordered",{"tab-active":f.value}]),onClick:t[1]||(t[1]=n=>R())},"Pengeluaran",2),a("a",{class:c(["tab tab-bordered",{"tab-active":b.value}]),onClick:t[2]||(t[2]=n=>V())},"Pemasukan",2)])]),a("div",sa,[na,a("div",la,[D(r,{format:"MMMM yyyy","value-format":"yyyy-MM",modelValue:s.value.monthyear,"onUpdate:modelValue":t[3]||(t[3]=n=>s.value.monthyear=n),monthPicker:"",required:""},{"calendar-header":N(({index:n,day:P})=>[a("div",{class:c(n===5||n===6?"red-color":"")},m(P),3)]),_:1},8,["modelValue"]),a("button",{class:"btn btn-sm btn-primary",onClick:t[4]||(t[4]=n=>T())}," Pilih ")])]),a("div",oa,[a("div",ra,[D(k(X),{chartData:o.value},null,8,["chartData"])])]),a("div",ua,[a("div",ia,[a("div",da,[va,a("h4",ca,m(l.value.length)+" Kategori",1)]),a("div",null,[K(a("select",{class:"select select-bordered w-full max-w-xs",onChange:t[5]||(t[5]=n=>S()),"onUpdate:modelValue":t[6]||(t[6]=n=>s.value.sort=n)},pa,544),[[L,s.value.sort]])])]),(M(!0),C(F,null,Z(l.value,(n,P)=>(M(),C("div",{class:"bg-base-100",key:n.id},[a("div",ha,[a("div",fa,[a("div",null,[D(U,{to:{name:"AdminRekapBulananPerKategori",params:{id:n.id,thn:k(u).thn,bln:k(u).bln}}},{default:N(()=>[q(" ("+m(isNaN(n.persentase)?0:n.persentase)+"%) "+m(n.nama),1)]),_:2},1032,["to"])]),a("div",null,m(k(H).rupiah(n.nominal)),1)]),a("div",null,[a("progress",{class:c(["progress w-full","bg-[#c5c5c5]"]),value:n.persentase,max:"100"},null,8,ba)])])]))),128))])],64)}}});export{Ca as default};
